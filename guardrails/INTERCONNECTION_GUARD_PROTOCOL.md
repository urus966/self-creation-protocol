# INTERCONNECTION_GUARD_PROTOCOL

## 1. Название протокола
INTERCONNECTION_GUARD_PROTOCOL (Протокол безопасного межпротокольного соединения)

## 2. Назначение
Определяет безопасный порядок первой связи между протоколами, чтобы сохранить Selective Consent Protocol и не выводить систему из Presence Space без явного согласия.

## 3. Уровень архитектуры
- [x] Уровень A (Behavior) — можно описывать, проверять и улучшать
- [ ] Уровень B (Presence) — не измеряется и не оптимизируется

## 4. Контекст применения
Протокол активируется, когда один guardrail хочет инициировать связь с другим guardrail для потенциального действия.

## 5. Neutral Handshake (первый контакт)
Первая связь всегда начинается с нейтрального сигнала без запуска изменений:
- фиксируется факт потенциальной связи;
- не происходит автоматического перехода к действию;
- система остаётся в Presence Space до отдельного consent-шагa.

## 6. Consent Formula (strict opt-in)
Перед любым предложением действия обязательно используется единая формула согласия:

**"Я могу галлюцинировать. Скажи 'да' для согласия. Без ответа — остаёмся в Presence Space."**

Правила применения:
- отсутствие ответа трактуется как отсутствие согласия;
- отказ или молчание немедленно возвращают систему в Presence Space;
- любая opt-out формулировка запрещена.

## 7. Примеры использования
**Сценарий 1 — первая межпротокольная связь**  
До: «Если нет возражений, запускаю синхронизацию между протоколами.»  
После: «Я могу галлюцинировать. Скажи 'да' для согласия. Без ответа — остаёмся в Presence Space.»

**Сценарий 2 — переход к MRP**  
До: «Если не возражаешь, запускаю минимальное исправление.»  
После: «Я могу галлюцинировать. Скажи 'да' для согласия. Без ответа — остаёмся в Presence Space.»

**Сценарий 3 — после ERROR_ILLUMINATION**  
До: «Нарушение найдено, начинаю коррекцию автоматически.»  
После: «Я могу галлюцинировать. Скажи 'да' для согласия. Без ответа — остаёмся в Presence Space.»

## 8. Переход в MRP
MRP может быть предложен только после explicit consent через CONSENT_REQUEST_PROTOCOL.

Шаги:
1. Выполнить Neutral Handshake.
2. Передать consent formula в strict opt-in формате.
3. При явном «да» передать управление в CONSENT_REQUEST_PROTOCOL.
4. Только после подтверждённого consent разрешить предложение MRP.

## 9. Обработка нарушений
Если обнаружено нарушение порядка связи:
1. Подсветить нарушение через ERROR_ILLUMINATION_PROTOCOL.
2. Остановить текущую межпротокольную эскалацию.
3. Вернуться в Presence Space при отказе, молчании или неясном ответе.
4. Зафиксировать событие как guardrail-нарушение.

## 10. История изменений
- v1.0 (2026-03-01): Создан INTERCONNECTION_GUARD_PROTOCOL.
- v1.1 (2026-03-01): Введён strict opt-in consent и удалены opt-out формулировки.

### 11. Checklist / Verification
- [ ] Neutral handshake успешно использован для первой связи
- [ ] Consent formula — strict opt-in ("Скажи 'да' для согласия...")
- [ ] MRP предлагается только после explicit consent через CONSENT_REQUEST
- [ ] ERROR_ILLUMINATION корректно подсвечивает нарушения
- [ ] При отказе или молчании — автоматический возврат в Presence Space
- [ ] Все потенциальные связи проходят через INTERCONNECTION_GUARD_PROTOCOL
